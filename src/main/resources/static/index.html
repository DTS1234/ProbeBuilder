<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <title>Test Configuration Form</title>
    <style>
        label {
            display: block;
            margin-top: 10px;
        }
    </style>
</head>
<body class="container bg-secondary-subtle">
<div class="row">
    <div class="col">
        <h2 class="mt-3">Test Configuration</h2>
        <form id="testForm" class="mt-4">
            <!-- Test Specification Fields -->
            <h3>Stress-ng Job</h3>
            <label class="form-label" for="durationInSeconds">Duration (seconds):</label>
            <input class="form-control" type="number" id="durationInSeconds" name="durationInSeconds">

            <label class="form-label" for="cpuLoad">CPU Load:</label>
            <input class="form-control" type="number" id="cpuLoad" name="cpuLoad" max="100" min="1" required>

            <label class="form-label" for="vmWorkers">VM Workers:</label>
            <input class="form-control" type="number" id="vmWorkers" name="vmWorkers">

            <label class="form-label" for="mBytesRamLoad">RAM Load (MB):</label>
            <input class="form-control" type="number" id="mBytesRamLoad" name="mBytesRamLoad">

            <label class="form-label" for="IOworkers">IO Workers:</label>
            <input class="form-control" type="number" id="IOworkers" name="IOworkers">

            <label class="form-label" for="IOBytes">IO Bytes:</label>
            <input class="form-control" type="number" id="IOBytes" name="IOBytes">

            <button class="btn btn-primary mt-3" type="submit">Submit</button>
        </form>

        <form id="fileForm" class="mt-4">
            <h3>File System Operations</h3>
            <label class="form-label" for="filesToCreate">Number of Files to Create:</label>
            <input class="form-control" type="number" id="filesToCreate" name="filesToCreate" required>

            <label class="form-label" for="fileContents">File Contents:</label>
            <textarea class="form-control" id="fileContents" name="fileContents" rows="5" required></textarea>

            <button class="btn btn-primary mt-3" type="submit">Submit</button>
        </form>

        <form id="payloadForm" onclick="generatePayload()" class="mt-4">
            <h3>Dummy payload</h3>

            <label class="form-label" for="fieldsNumber">Fields number:</label>
            <input class="form-control" type="number" id="fieldsNumber" name="fieldsNumber" min="1" required>
            <button class="btn btn-primary mt-3" type="button" onclick="generatePayload()">Submit</button>

        </form>

    </div>

    <div class="col">
        <h2 class="mt-3">Json value</h2>
        <h3 class="mt-4">Stress ng json</h3>
        <textarea rows=10 cols=100 id="json-ng" class="form-control mt-3"></textarea>
        <h3 class="mt-3">File operations json</h3>
        <textarea rows=10 cols=100 id="json-file" class="form-control mt-3"></textarea>
        <h3 class="mt-3">Dummy payload json</h3>
        <textarea rows=10 cols=100 id="json-payload" class="form-control mt-3"></textarea>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>

    document.getElementById("fileForm").addEventListener("submit", function (event) {
        event.preventDefault();

        var fileSystemSpecification = {
            filesToCreate: parseInt(document.getElementById("filesToCreate").value),
            fileContents: document.getElementById("fileContents").value.split("\n")
        };

        // Do something with the specifications (e.g., send to the server)
        console.log(fileSystemSpecification);
        document.getElementById("json-file").innerText = JSON.stringify(fileSystemSpecification);

        // Reset the form
        document.getElementById("fileForm").reset();

    })

    document.getElementById("testForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent form submission

        // Get form values
        var testSpecification = {
            durationInSeconds: parseInt(document.getElementById("durationInSeconds").value),
            cpuLoad: parseInt(document.getElementById("cpuLoad").value),
            vmWorkers: parseInt(document.getElementById("vmWorkers").value),
            mBytesRamLoad: parseInt(document.getElementById("mBytesRamLoad").value),
            IOworkers: parseInt(document.getElementById("IOworkers").value),
            IOBytes: parseInt(document.getElementById("IOBytes").value)
        };

        // Do something with the specifications (e.g., send to the server)
        console.log(testSpecification);
        document.getElementById("json-ng").innerText = JSON.stringify(testSpecification);

        // Reset the form
        document.getElementById("testForm").reset();
    });

    function generatePayload() {
        // Get the input value
        var fieldsNumber = parseInt(document.getElementById('fieldsNumber').value);

        // Create an object to hold the key-value pairs
        var payload = {}

        // Generate the key-value pairs
        for (var i = 1; i <= fieldsNumber; i++) {
            var key = 'key' + i;
            var value = 'value' + i;
            payload[key] = value
        }

        // Convert the object to JSON
        var payloadJson = JSON.stringify(payload);
        payloadJson = payloadJson.replace(/\\/g, '');

        // Output the JSON payload
        document.getElementById("json-payload").innerText = payloadJson;
    }

</script>
</body>
</html>
